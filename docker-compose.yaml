version: '3.8'

services:
  socat-proxy:
    build: .
    environment:
      - TARGET_HOST=${TARGET_HOST:}
      - TARGET_PORT=${TARGET_PORT:}
      - UNIX_SOCKET_NAME=${UNIX_SOCKET_NAME}
      - UNIX_SOCKET_PATH=${UNIX_SOCKET_PATH}
      - HOST_SOCKET_PATH=${HOST_SOCKET_PATH}
    volumes:
      - ${HOST_SOCKET_PATH}:${UNIX_SOCKET_PATH}
    networks:
      - proxy-network
    restart: unless-stopped

volumes:
  socket_volume:

networks:
  proxy-network:
    external: false